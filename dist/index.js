(()=>{"use strict";var e={416:(e,t,n)=>{var o=n(379),r=n.n(o),a=n(795),i=n.n(a),c=n(569),s=n.n(c),d=n(565),u=n.n(d),l=n(216),f=n.n(l),p=n(589),h=n.n(p),g=n(424),m={};m.styleTagTransform=h(),m.setAttributes=u(),m.insert=s().bind(null,"head"),m.domAPI=i(),m.insertStyleElement=f(),r()(g.Z,m),g.Z&&g.Z.locals&&g.Z.locals,e=n.hmd(e),function(t){"object"==typeof exports?e.exports=t():"function"==typeof define&&n.amdO?define([],t):("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:this).Recorder=t()}((function(){return function e(t,n,o){function r(i,c){if(!n[i]){if(!t[i]){if(a)return a(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var d=n[i]={exports:{}};t[i][0].call(d.exports,(function(e){return r(t[i][1][e]||e)}),d,d.exports,e,t,n,o)}return n[i].exports}for(var a=void 0,i=0;i<o.length;i++)r(o[i]);return r}({1:[function(e,t,n){t.exports=e("./recorder").Recorder},{"./recorder":2}],2:[function(e,t,n){var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();Object.defineProperty(n,"__esModule",{value:!0}),n.Recorder=void 0;var r,a=(r=e("inline-worker"))&&r.__esModule?r:{default:r},i=n.Recorder=function(){function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config={bufferLen:4096,numChannels:2,mimeType:"audio/wav"},this.recording=!1,this.callbacks={getBuffer:[],exportWAV:[]},Object.assign(this.config,n),this.context=t.context,this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,this.config.bufferLen,this.config.numChannels,this.config.numChannels),this.node.onaudioprocess=function(e){if(o.recording){for(var t=[],n=0;n<o.config.numChannels;n++)t.push(e.inputBuffer.getChannelData(n));o.worker.postMessage({command:"record",buffer:t})}},t.connect(this.node),this.node.connect(this.context.destination);var r={};this.worker=new a.default((function(){var e=0,t=[],n=void 0,o=void 0;function a(){for(var e=0;e<o;e++)t[e]=[]}function i(e,t){for(var n=new Float32Array(t),o=0,r=0;r<e.length;r++)n.set(e[r],o),o+=e[r].length;return n}function c(e,t,n){for(var o=0;o<n.length;o++)e.setUint8(t+o,n.charCodeAt(o))}r.onmessage=function(s){switch(s.data.command){case"init":d=s.data.config,n=d.sampleRate,o=d.numChannels,a();break;case"record":!function(n){for(var r=0;r<o;r++)t[r].push(n[r]);e+=n[0].length}(s.data.buffer);break;case"exportWAV":!function(a){for(var s=[],d=0;d<o;d++)s.push(i(t[d],e));var u,l,f,p=(u=2===o?function(e,t){for(var n=e.length+t.length,o=new Float32Array(n),r=0,a=0;r<n;)o[r++]=e[a],o[r++]=t[a],a++;return o}(s[0],s[1]):s[0],l=new ArrayBuffer(44+2*u.length),c(f=new DataView(l),0,"RIFF"),f.setUint32(4,36+2*u.length,!0),c(f,8,"WAVE"),c(f,12,"fmt "),f.setUint32(16,16,!0),f.setUint16(20,1,!0),f.setUint16(22,o,!0),f.setUint32(24,n,!0),f.setUint32(28,4*n,!0),f.setUint16(32,2*o,!0),f.setUint16(34,16,!0),c(f,36,"data"),f.setUint32(40,2*u.length,!0),function(e,t,n){for(var o=0;o<n.length;o++,t+=2){var r=Math.max(-1,Math.min(1,n[o]));e.setInt16(t,r<0?32768*r:32767*r,!0)}}(f,44,u),f),h=new Blob([p],{type:a});r.postMessage({command:"exportWAV",data:h})}(s.data.type);break;case"getBuffer":!function(){for(var n=[],a=0;a<o;a++)n.push(i(t[a],e));r.postMessage({command:"getBuffer",data:n})}();break;case"clear":e=0,t=[],a()}var d}}),r),this.worker.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:this.config.numChannels}}),this.worker.onmessage=function(e){var t=o.callbacks[e.data.command].pop();"function"==typeof t&&t(e.data.data)}}return o(e,[{key:"record",value:function(){this.recording=!0}},{key:"stop",value:function(){this.recording=!1}},{key:"clear",value:function(){this.worker.postMessage({command:"clear"})}},{key:"getBuffer",value:function(e){if(!(e=e||this.config.callback))throw new Error("Callback not set");this.callbacks.getBuffer.push(e),this.worker.postMessage({command:"getBuffer"})}},{key:"exportWAV",value:function(e,t){if(t=t||this.config.mimeType,!(e=e||this.config.callback))throw new Error("Callback not set");this.callbacks.exportWAV.push(e),this.worker.postMessage({command:"exportWAV",type:t})}}],[{key:"forceDownload",value:function(e,t){var n=(window.URL||window.webkitURL).createObjectURL(e),o=window.document.createElement("a");o.href=n,o.download=t||"output.wav";var r=document.createEvent("Event");r.initEvent("click",!0,!0),o.dispatchEvent(r)}}]),e}();n.default=i},{"inline-worker":3}],3:[function(e,t,n){t.exports=e("./inline-worker")},{"./inline-worker":4}],4:[function(e,t,o){(function(e){var n=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),o=!!(e===e.window&&e.URL&&e.Blob&&e.Worker),r=function(){function t(n,r){var a=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o){var i=n.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],c=e.URL.createObjectURL(new e.Blob([i],{type:"text/javascript"}));return new e.Worker(c)}this.self=r,this.self.postMessage=function(e){setTimeout((function(){a.onmessage({data:e})}),0)},setTimeout((function(){n.call(r)}),0)}return n(t,{postMessage:{value:function(e){var t=this;setTimeout((function(){t.self.onmessage({data:e})}),0)}}}),t}();t.exports=r}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}));const v=document.getElementById("scanButton"),w=document.getElementById("writeButton"),y=(document.getElementById("makeReadOnlyButton"),document.getElementById("output"));let b,x,k;v.addEventListener("click",(async()=>{console.log("User clicked scan button");try{const e=new NDEFReader;await e.scan(),console.log("> Scan started"),e.addEventListener("readingerror",(()=>{console.log("Argh! Cannot read data from the NFC tag. Try another one?")})),e.addEventListener("reading",(({message:e,serialNumber:t})=>{console.log(`> Serial Number: ${t}`),y.innerHTML=`${t}`,console.log(`> Records: (${e.records.length})`)}))}catch(e){console.log("Argh! "+e)}})),w.addEventListener("click",(async()=>{y.innerHTML="User clicked write button";try{const e=new NDEFReader;await e.write("SOME STRINGGGGGG"),y.innerHTML="> Message written"}catch(e){y.innerHTML="Argh! "+e}})),window.onload=function(){!function(){try{window.AudioContext=window.AudioContext||window.webkitAudioContext,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia,window.URL=window.URL||window.webkitURL,b=new AudioContext,console.log("Audio context is ready !"),console.log("navigator.getUserMedia "+(navigator.getUserMedia?"available.":"not present!"))}catch(e){alert("No web audio support in this browser!")}}(),document.getElementById("start-btn").addEventListener("click",(function(){navigator.getUserMedia({audio:!0},(function(e){k=e;var t=b.createMediaStreamSource(e);console.log("Media stream succesfully created"),x=new Recorder(t),console.log("Recorder initialised"),x&&x.record(),console.log("Recording..."),document.getElementById("start-btn").disabled=!0,document.getElementById("stop-btn").disabled=!1}),(function(e){console.error("No live audio input: "+e)}))}),!1),document.getElementById("stop-btn").addEventListener("click",(function(){var e;e=function(e){var t=URL.createObjectURL(e),n=document.createElement("li"),o=document.createElement("audio"),r=document.createElement("a");o.controls=!0,o.src=t,r.href=t,r.download=(new Date).toISOString()+".wav",r.innerHTML=r.download,n.appendChild(o),n.appendChild(r),recordingslist.appendChild(n)},x&&x.stop(),console.log("Stopped recording."),k.getAudioTracks()[0].stop(),document.getElementById("start-btn").disabled=!1,document.getElementById("stop-btn").disabled=!0,x&&x.exportWAV((function(t){e(t),x.clear()}),"audio/wav")}),!1)}},424:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(81),r=n.n(o),a=n(645),i=n.n(a)()(r());i.push([e.id,"html, body {\n    width: 100%;\n    height: 100%;\n    background: black;\n    color: greenyellow;\n}\n\n\n.container {\n    height: 70vh;\n    width: 80vw;\n}\n\nbutton {\n    width: 100%;\n    height: 1%;\n    padding: 5%;\n    background-color: greenyellow;\n\n}\n\n.center {\n    margin: auto;\n    border: 6px solid greenyellow;\n    padding: 5%;\n  }\n\n  ul {\n    list-style: none;\n}\n\n#recordingslist audio {\n    display: block;\n    margin-bottom: 10px;\n}",""]);const c=i},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,r,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(o)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(i[s]=!0)}for(var d=0;d<e.length;d++){var u=[].concat(e[d]);o&&i[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),t.push(u))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var a={},i=[],c=0;c<e.length;c++){var s=e[c],d=o.base?s[0]+o.base:s[0],u=a[d]||0,l="".concat(d," ").concat(u);a[d]=u+1;var f=n(l),p={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==f)t[f].references++,t[f].updater(p);else{var h=r(p,o);o.byIndex=c,t.splice(c,0,{identifier:l,updater:h,references:1})}i.push(l)}return i}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var a=o(e=e||[],r=r||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var c=n(a[i]);t[c].references--}for(var s=o(e,r),d=0;d<a.length;d++){var u=n(a[d]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=s}}},569:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={id:o,loaded:!1,exports:{}};return e[o](a,a.exports,n),a.loaded=!0,a.exports}n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,n(416)})();